@using GenderPayGap.Core.Helpers
@using GenderPayGap.WebUI.Models.Shared
@using System.IO

@{
    ViewBag.Title = "Download gender pay gap figures - Gender pay gap service";
    Layout = "~/Views/GovUkFrontend/GovUkFrontendLayout.cshtml";
}

@{
    Dictionary<int, int> YearAndSize = new Dictionary<int, int>();
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        <h1 class="govuk-heading-xl">
            Download gender pay gap data
        </h1>

        <p class="govuk-body">
            These files are in a CSV (Comma Separated Values) format that can be read by any spreadsheet program or word processor. They are not formatted for printing.
        </p>
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        @await Html.PartialModelAsync(new Details
        {
            Id = "AboutCSVData",
            LinkText = "About CSV data",
            SummaryPartial = "Download/CSVDataTable"
        })
        <hr/>

        <ul class="govuk-list">
            @{
                List <(int,string)> reportingYearsWithFileSizes = ReportingYearsHelper.GetReportingYearWithCSVFileSize();
                foreach (var item in reportingYearsWithFileSizes)
                {
                    <li>
                        <a href="@Url.Action("DownloadData", "Viewing", item.Item1)"
                           class="govuk-link">
                            <span class="govuk-visually-hidden">Download gender pay gap data for</span>
                            Reporting year @(ReportingYearsHelper.FormatYearAsReportingPeriod(item.Item1)) (@item.Item2 .CSV file)
                        </a>
                    </li>
                }
            }
        </ul>
    </div>
</div>
