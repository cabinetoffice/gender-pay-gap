@using GenderPayGap.Core
@model GenderPayGap.WebUI.ErrorHandling.EmailNotVerifiedException
@{
    ViewBag.Title = "Confirm your email address - Gender pay gap service";
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        <h1 class="govuk-heading-xl">
            Confirm your email address
        </h1>

        @if (Model.EmailVerifySendDate.HasValue)
        {
            DateTime emailVerifyExpiryTime = Model.EmailVerifySendDate.Value.AddDays(Global.EmailVerificationExpiryDays);

            if (emailVerifyExpiryTime > VirtualDateTime.Now)
            {
                <p class="govuk-body">
                    On @(Model.EmailVerifySendDate.Value.ToString("d MMMM yyyy")) at @(Model.EmailVerifySendDate.Value.ToString("h:mm tt"))
                    we sent you a confirmation email to <span class="govuk-!-font-weight-bold">@(Model.EmailAddress)</span>.
                </p>

                <p class="govuk-body">
                    Follow the instructions in the email to confirm your user account.
                    <br />
                    You will then be able to continue using the service.
                </p>

                <h2 class="govuk-heading-m">No email yet?</h2>

                <p class="govuk-body">
                    Our email can take a few minutes to arrive. If you can't see it in a few minutes please check your junk mail folder.
                </p>

                <p class="govuk-body">
                    If you are still unable to access the service, please contact the Gender Pay Gap team at
                    <a href="mailto:@(Global.GpgReportingEmail)"
                       class="govuk-link">
                        @(Global.GpgReportingEmail)
                    </a>
                </p>
            }
            else
            {
                <p class="govuk-body">
                    We need to confirm your email address before you continue using the service.
                </p>

                <p class="govuk-body">
                    Please contact the Gender Pay Gap team at
                    <a href="mailto:@(Global.GpgReportingEmail)"
                       class="govuk-link">
                        @(Global.GpgReportingEmail)
                    </a>
                    and ask them to re-send you a verification email.
                </p>
            }
        }
        else
        {
            <p class="govuk-body">
                We need to confirm your email address before you continue using the service.
            </p>

            <p class="govuk-body">
                Please contact the Gender Pay Gap team at
                <a href="mailto:@(Global.GpgReportingEmail)"
                   class="govuk-link">
                    @(Global.GpgReportingEmail)
                </a>
                and ask them to send you a verification email.
            </p>
        }

    </div>
</div>
