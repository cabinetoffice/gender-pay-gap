@using GenderPayGap.Core
@using GenderPayGap.WebUI.Views.Components.StepByStep
@model ReportingStepsViewModel

@{
    var steps = new List<StepViewModel>
    {
        new StepViewModel
        {
            Title = "Find out what the gender pay gap is",
            StepType = StepType.Number,
            StepNumber = 1,
            Description = new StepDescription
            {
                Text = "A number of factors contribute to the gender pay gap.",
            },
            StepTasks = new List<StepTask>
            {
                new StepTask {
                    TaskText = "Learn about the gender pay gap and what contributes to it", 
                    TaskUrl = "/reporting-step-by-step/find-out-what-the-gender-pay-gap-is"
                },
                new StepTask
                {
                    TaskText = "View and compare other organisations' gender pay gaps", 
                    TaskUrl = "/reporting-step-by-step"
                }
            }
        },
        new StepViewModel
        {
            Title = "Check if and when you're required to report",
            StepType = StepType.Number,
            StepNumber = 2,
            Description = new StepDescription
            {
                Text = "There are different regulations for public and private organisations.",
            },
            StepTasks = new List<StepTask>
            {
                
                new StepTask {TaskText = "Find out if you need to report", TaskUrl = "/reporting-step-by-step"},
                new StepTask {TaskText = "Find out when you need to report", TaskUrl = "/reporting-step-by-step"}
            }
        },

        new StepViewModel
        {
            Title = "Find out what data you need to report",
            StepType = StepType.Number,
            StepNumber = 3,
            Description = new StepDescription
            {
                Text = "You will need to gather and calculate a range of data."
            },
            StepTasks = new List<StepTask>
            {
                new StepTask {TaskText = "Find out when your 'snapshot' date is", 
                    TaskUrl = "/reporting-step-by-step"
                },
                new StepTask {TaskText = "Find out what data you will need", 
                TaskUrl = "/reporting-step-by-step",
                }
            }
        },
        new StepViewModel
        {
            Title = "Create a user account or sign in",
            StepType = StepType.Number,
            StepNumber = 4,
            Description = new StepDescription
            {
                Text = "You will need to create your own user account even if someone else has previously reported your organisation's gender pay gap."
            },
            StepTasks = new List<StepTask>
            {
                new StepTask {TaskText = "Create your user account", TaskUrl = "/Register"},
                new StepTask {TaskText = "Sign in to your account", TaskUrl = "/Register"},
            }
        },
        new StepViewModel
        {
            Title = "Add or manage your organisations",
            StepType = StepType.And,
            Description = new StepDescription
            {
                Text = "Adding a new organisation can take up to three weeks to verify. You must create your user account before adding an organisation."
            },
            StepTasks = new List<StepTask>
            {
                new StepTask {TaskText = "Add an organisation", TaskUrl = @Url.Action(nameof(RegisterController.OrganisationType), "Register")},
                new StepTask {TaskText = "Manage my organisations", TaskUrl = @Url.Action(nameof(RegisterController.OrganisationType), "Register")},
            }
        },
        new StepViewModel
        {
            Title = "Understand how to calculate your gender pay gap",
            StepType = StepType.Number,
            StepNumber = 5,
            StepTasks = new List<StepTask>
            {
                new StepTask {
                    TaskText = "Find out how to calculate your data", 
                    TaskUrl = "/reporting-step-by-step",
                    OpenInNewTab = true
                }
            }
        },
        new StepViewModel
        {
            Title = "Learn how to diagnose your gender pay gap",
            StepType = StepType.Number,
            StepNumber = 6,
            Description = new StepDescription
            {
                Text = "There are many contributing factors to the gender pay gap, and effective actions you can take to help close it."
            },
            StepTasks = new List<StepTask>
            {
                new StepTask {TaskText = "Find out what actions you can take to close your gender pay gap", TaskUrl = "/reporting-step-by-step"},
                new StepTask {
                    TaskText = "Create a gender pay gap action plan", 
                    TaskUrl = "/reporting-step-by-step"
                }
            }
        },
        new StepViewModel
        {
            Title = "Report your gender pay gap data",
            StepType = StepType.Number,
            StepNumber = 7,
            StepTasks = new List<StepTask>
            {
                new StepTask {
                    TaskText = "Submit your gender pay gap data", 
                    TaskUrl = @Global.StartUrl ?? Url.Action(nameof(OrganisationController.ManageOrganisations), "Organisation") },
            }
        },
        new StepViewModel
        {
            Title = "Publish a statement and narrative response to your gender pay gap",
            StepType = StepType.Number,
            StepNumber = 8,
            Description = new StepDescription
            {
                Text = "The statement must be published on your website, and on the Gender Pay Gap service."
            },
            StepTasks = new List<StepTask>
            {
                new StepTask {
                    TaskText = "Find out what information you must publish", 
                    TaskUrl = "/reporting-step-by-step",
                    OpenInNewTab = true
                },
            }
        },
    };
    if (Model.CurrentStep != null && Model.CurrentTask != null)
    {
        steps[Model.CurrentStep.Value].IsCurrentStep = true;
        steps[Model.CurrentStep.Value].StepTasks[(int) Model.CurrentTask].IsCurrentTask = true;
    }
}

@{ await Html.RenderPartialAsync("/Views/Components/StepByStep/Steps.cshtml", steps); }
