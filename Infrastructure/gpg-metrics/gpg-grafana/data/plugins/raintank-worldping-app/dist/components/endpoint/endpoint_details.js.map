{"version":3,"sources":["../../../src/components/endpoint/endpoint_details.js"],"names":["EndpointDetailsCtrl","$scope","$injector","$location","$q","backendSrv","contextSrv","alertSrv","isOrgEditor","hasRole","pageReady","endpoint","search","getEndpoint","set","checktypes","name","dashName","post","id","self","get","then","resp","meta","code","message","reject","body","getProbes","_","forEach","checks","check","route","type","probes","c","toLowerCase","mon","getMonitorByTypeName","enabled","state","sinceUpdate","Date","getTime","updated","frequency","states","duration","stateChange","secs","Math","floor","mins","hours","days","config","ids","probeList","p","tags","t","indexOf","keys","url","slug","path","checkType","healthSettings","notifications","addresses","split","list","addr","push","trim","emails","getNotificationEmails","length","email","res","match","join","templateUrl"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport { promiseToDigest } from '../../utils/promiseToDigest';\n\nclass EndpointDetailsCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location,$q, backendSrv, contextSrv, alertSrv) {\n    this.isOrgEditor = contextSrv.hasRole(\"Admin\") || contextSrv.hasRole(\"Editor\");\n    this.backendSrv = backendSrv;\n    this.alertSrv = alertSrv;\n    this.$location = $location;\n    this.$q = $q;\n    this.$scope = $scope;\n\n    this.pageReady = false;\n    this.endpoint = null;\n\n    if ($location.search().endpoint) {\n      this.getEndpoint($location.search().endpoint);\n    } else {\n      this.alertSrv.set(\"no endpoint id provided.\", \"\", 'error', 10000);\n    }\n\n    this.checktypes = [\n      {name: 'DNS', dashName: 'worldping-endpoint-dns?'},\n      {name: 'Ping', dashName: 'worldping-endpoint-ping?'},\n      {name: 'HTTP', dashName: 'worldping-endpoint-web?var-protocol=http&'},\n      {name: 'HTTPS', dashName: 'worldping-endpoint-web?var-protocol=https&'}\n    ];\n  }\n\n  tagsUpdated() {\n    promiseToDigest(this.$scope)\n      (this.backendSrv.post(\"api/plugin-proxy/raintank-worldping-app/api/endpoints\", this.endpoint));\n  }\n\n  getEndpoint(id) {\n    var self = this;\n\n    promiseToDigest(this.$scope)(\n    self.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/v2/endpoints/'+id).then(function(resp) {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to get endpoint.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      self.endpoint = resp.body;\n      var getProbes = false;\n      _.forEach(self.endpoint.checks, function(check) {\n        if (check.route.type === 'byTags') {\n          getProbes = true;\n        }\n      });\n      if (getProbes) {\n        self.getProbes().then(() => {\n          self.pageReady = true;\n        });\n      } else {\n        self.pageReady = true;\n      }\n    }));\n  }\n\n  getProbes() {\n    var self = this;\n    return promiseToDigest(this.$scope)(self.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/v2/probes').then(function(resp) {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to get probes.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      self.probes = resp.body;\n    }));\n  }\n\n  getMonitorByTypeName(name) {\n    var check;\n    _.forEach(this.endpoint.checks, function(c) {\n      if (c.type.toLowerCase() === name.toLowerCase()) {\n        check = c;\n      }\n    });\n    return check;\n  }\n\n  monitorStateTxt(type) {\n    var mon = this.getMonitorByTypeName(type);\n    if (typeof(mon) !== \"object\") {\n      return \"disabled\";\n    }\n    if (!mon.enabled) {\n      return \"disabled\";\n    }\n    if (mon.state < 0 || mon.state > 2) {\n      var sinceUpdate = new Date().getTime() - new Date(mon.updated).getTime();\n      if (sinceUpdate < (mon.frequency * 5 * 1000)) {\n        return 'pending';\n      }\n      return 'nodata';\n    }\n    var states = [\"online\", \"warn\", \"critical\"];\n    return states[mon.state];\n  }\n\n  //TODO: move to directive.\n  monitorStateClass(type) {\n    var mon = this.getMonitorByTypeName(type);\n    if (typeof(mon) !== \"object\") {\n      return \"disabled\";\n    }\n    if (!mon.enabled) {\n      return \"disabled\";\n    }\n    if (mon.state < 0 || mon.state > 2) {\n      return 'nodata';\n    }\n    var states = [\"online\", \"warn\", \"critical\"];\n    return states[mon.state];\n  }\n\n  stateChangeStr(type) {\n    var mon = this.getMonitorByTypeName(type);\n    if (typeof(mon) !== \"object\") {\n      return \"\";\n    }\n    var duration = new Date().getTime() - new Date(mon.stateChange).getTime();\n    if (duration < 10000) {\n      return \"a few seconds ago\";\n    }\n    if (duration < 60000) {\n      var secs = Math.floor(duration/1000);\n      return \"for \" + secs + \" seconds\";\n    }\n    if (duration < 3600000) {\n      var mins = Math.floor(duration/1000/60);\n      return \"for \" + mins + \" minutes\";\n    }\n    if (duration < 86400000) {\n      var hours = Math.floor(duration/1000/60/60);\n      return \"for \" + hours + \" hours\";\n    }\n    var days = Math.floor(duration/1000/60/60/24);\n    return \"for \" + days + \" days\";\n  }\n\n  getProbesForCheck(type) {\n    var check = this.getMonitorByTypeName(type);\n    if (typeof(check) !== \"object\") {\n      return [];\n    }\n    if (check.route.type === \"byIds\") {\n      return check.route.config.ids;\n    } else if (check.route.type === \"byTags\") {\n      var probeList = {};\n      _.forEach(this.probes, function(p) {\n        _.forEach(check.route.config.tags, function(t) {\n          if (_.indexOf(p.tags, t) !== -1) {\n            probeList[p.id] = true;\n          }\n        });\n      });\n      return _.keys(probeList);\n    } else {\n      this.alertSrv(\"check has unknown routing type.\", \"unknown route type.\", \"error\", 5000);\n      return [];\n    }\n  }\n\n  setEndpoint(id) {\n    this.$location.url('plugins/raintank-worldping-app/page/endpoint_details?endpoint='+id);\n  }\n\n  gotoDashboard(endpoint, type) {\n    if (!type) {\n      type = 'summary';\n    }\n    var search = {\n      \"var-probe\": \"All\",\n      \"var-endpoint\": this.endpoint.slug\n    };\n    switch(type.toLowerCase()) {\n      case \"summary\":\n        this.$location.path(\"/dashboard/db/worldping-endpoint-summary\").search(search);\n        break;\n      case \"ping\":\n        this.$location.path(\"/dashboard/db/worldping-endpoint-ping\").search(search);\n        break;\n      case \"dns\":\n        this.$location.path(\"/dashboard/db/worldping-endpoint-dns\").search(search);\n        break;\n      case \"http\":\n        search['var-protocol'] = \"http\";\n        this.$location.path(\"/dashboard/db/worldping-endpoint-web\").search(search);\n        break;\n      case \"https\":\n        search['var-protocol'] = \"https\";\n        this.$location.path(\"/dashboard/db/worldping-endpoint-web\").search(search);\n        break;\n      default:\n        this.$location.path(\"/dashboard/db/worldping-endpoint-summary\").search(search);\n        break;\n    }\n  }\n\n  gotoEventDashboard(endpoint, type) {\n    this.$location.url(\"/dashboard/db/worldping-events\").search({\n      \"var-probe\": \"All\",\n      \"var-endpoint\": endpoint.slug,\n      \"var-monitor_type\": type.toLowerCase()\n    });\n  }\n\n  getNotificationEmails(checkType) {\n    var mon = this.getMonitorByTypeName(checkType);\n    if (!mon || mon.healthSettings.notifications.addresses === \"\") {\n      return [];\n    }\n    var addresses = mon.healthSettings.notifications.addresses.split(',');\n    var list = [];\n    addresses.forEach(function(addr) {\n      list.push(addr.trim());\n    });\n    return list;\n  }\n\n  getNotificationEmailsAsString(checkType) {\n    var emails = this.getNotificationEmails(checkType);\n    if (emails.length < 1) {\n      return \"No recipients specified\";\n    }\n    var list = [];\n    emails.forEach(function(email) {\n      // if the email in the format `display name <email@address>`\n      // then just show the display name.\n      var res = email.match(/\\\"?(.+)\\\"?\\s*<.*@.*>/);\n      if (res && res.length === 2) {\n        list.push(res[1]);\n      } else {\n        list.push(email);\n      }\n    });\n    return list.join(\", \");\n  }\n}\n\nEndpointDetailsCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/endpoint/partials/endpoint_details.html';\nexport {EndpointDetailsCtrl};\n"],"file":"endpoint_details.js"}